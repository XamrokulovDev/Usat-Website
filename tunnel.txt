    import React, { useEffect, useRef, useState } from 'react';
    import { motion } from 'framer-motion';

    const images = [
    '/images/image1.jpg',
    '/images/image2.jpg',
    '/images/image3.jpg',
    '/images/image4.jpg',
    ];

    const Tunnel: React.FC = () => {
    const wrapperRef = useRef<HTMLDivElement>(null);
    const [progress, setProgress] = useState(0);
    const [lockScroll, setLockScroll] = useState(true);
    const [showText, setShowText] = useState(false);

    useEffect(() => {
        const handleScroll = () => {
        if (!wrapperRef.current) return;
        const rect = wrapperRef.current.getBoundingClientRect();
        const totalHeight = window.innerHeight;

        const localProgress = Math.min(
            Math.max(0, 1 - rect.top / totalHeight),
            1
        );

        setProgress(localProgress);

        if (localProgress >= 1) {
            setLockScroll(false);
            setShowText(true);
            document.body.style.overflow = 'auto'; // scrollni yoq
        }
        };

        window.addEventListener('scroll', handleScroll);

        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

    useEffect(() => {
        if (lockScroll) {
        document.body.style.overflow = 'hidden'; // scrollni bloklash
        }
    }, [lockScroll]);

    return (
        <section className="relative h-[200vh] bg-black" ref={wrapperRef}>
        <div className="sticky top-0 h-screen flex items-center justify-center text-white overflow-hidden">
            <div className="tunnel-perspective absolute inset-0 flex items-center justify-center">
            {/* Chap tarafdagi rasmlar */}
            {images.map((src, index) => {
                const z = -index * 300 + progress * 1200;
                return (
                <motion.div
                    key={`left-${index}`}
                    className="absolute w-64 h-40 rounded-xl overflow-hidden shadow-xl"
                    style={{
                    transform: `translate3d(-300px, 0, ${z}px)`,
                    }}
                >
                    <img src={src} alt="" className="w-full h-full object-cover" />
                </motion.div>
                );
            })}

            {/* O‘ng tarafdagi rasmlar */}
            {images.map((src, index) => {
                const z = -index * 300 + progress * 1200;
                return (
                <motion.div
                    key={`right-${index}`}
                    className="absolute w-64 h-40 rounded-xl overflow-hidden shadow-xl"
                    style={{
                    transform: `translate3d(300px, 0, ${z}px)`,
                    }}
                >
                    <img src={src} alt="" className="w-full h-full object-cover" />
                </motion.div>
                );
            })}
            </div>

            {showText && (
            <motion.div
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="absolute text-3xl font-bold text-center px-4"
            >
                Kelajagingizga hozirdan<br />
                birinchi qadam qo‘ying
            </motion.div>
            )}
        </div>
        </section>
    );
    };

    export default Tunnel;